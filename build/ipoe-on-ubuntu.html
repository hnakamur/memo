<!DOCTYPE html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UbuntuでIPoE &#8212; hnakamur&#39;s tech memo  ドキュメント</title>
    <link rel="stylesheet" href="_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/translations.js"></script>
    
    <script src="_static/sidebar.js"></script>
    
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
    <link rel="next" title="OpenSSLで自己認証局を作る" href="create-self-signed-certificate-authority-with-openssl.html" />
    <link rel="prev" title="Windows 10にSphinxをインストール" href="install-sphinx-on-windows10.html" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <link rel="shortcut icon" type="image/png" href="_static/favicon.png" />
    <meta name="viewport" content="width=device-width,initial-scale=0.8">
    
    

  </head><body>
    <div class="related">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="responsive-menu"><a href="#sidebar-anchor" title="Navigation">&#9776;</a></li>
        <li><a href="index.html">hnakamur&#39;s tech memo  ドキュメント</a> &#187;</li> 
      </ul>
    </div>
    
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="ubuntuipoe">
<h1>UbuntuでIPoE<a class="headerlink" href="#ubuntuipoe" title="このヘッドラインへのパーマリンク">¶</a></h1>
<ul class="simple">
<li><dl class="field-list simple">
<dt class="field-odd">作成日</dt>
<dd class="field-odd"><p>2018-12-01</p>
</dd>
</dl>
</li>
<li><dl class="field-list simple">
<dt class="field-odd">更新日</dt>
<dd class="field-odd"><p>2019-07-27</p>
</dd>
</dl>
</li>
</ul>
<div class="section" id="id1">
<h2>はじめに<a class="headerlink" href="#id1" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><a class="reference external" href="https://www.iijmio.jp/imh/">IIJmioひかり</a> とIIJmio ひかり電話と <a class="reference external" href="https://www.iijmio.jp/imh/ipoe/">IIJmioひかり IPoEオプション</a> を利用しているのですが、Ubuntu 18.04.1 LTSでIPoEを使うようにしたメモです。</p>
</div>
<div class="section" id="id2">
<h2>構成図<a class="headerlink" href="#id2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>ネットワーク配線図は以下の通りです。</p>
<div><svg height="440" viewBox="0 0 640 440" width="640" xmlns="http://www.w3.org/2000/svg" xmlns:inkspace="http://www.inkscape.org/namespaces/inkscape" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs id="defs_block">
    <filter height="1.504" id="filter_blur" inkspace:collect="always" width="1.1575" x="-0.07875" y="-0.252">
      <feGaussianBlur id="feGaussianBlur3780" inkspace:collect="always" stdDeviation="4.2" />
    </filter>
  </defs>
  <title>blockdiag</title>
  <desc />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="46" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="126" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="259" y="126" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="206" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="286" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="366" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="259" y="366" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="451" y="366" />
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="40" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="49" x="128.5" y="67">home-gw</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="120" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="34" x="128.0" y="147">beagle</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="256" y="120" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="46" x="320.0" y="147">primergy</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="200" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="21" x="128.5" y="225">hub</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="280" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="56" x="128.0" y="305">wifi-router</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="360" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="47" x="128.5" y="387">thinkpad</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="256" y="360" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="41" x="320.5" y="385">android</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="448" y="360" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="23" x="512.5" y="387">ipad</text>
  <path d="M 128 80 L 128 120" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 80 L 128 100" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 100 L 320 100" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 320 100 L 320 120" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 160 L 128 200" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 320 160 L 320 180" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 180 L 320 180" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 180 L 128 200" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 240 L 128 280" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 320 L 128 360" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="4" />
  <path d="M 128 320 L 128 340" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="4" />
  <path d="M 128 340 L 320 340" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="4" />
  <path d="M 320 340 L 320 360" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="4" />
  <path d="M 128 320 L 128 340" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="4" />
  <path d="M 128 340 L 512 340" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="4" />
  <path d="M 512 340 L 512 360" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="4" />
  <rect fill="white" height="14" stroke="rgb(0,0,0)" width="35" x="159" y="343" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="19" x="176.5" y="355">wifi</text>
  <rect fill="white" height="14" stroke="rgb(0,0,0)" width="35" x="271" y="343" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="19" x="288.5" y="355">wifi</text>
  <rect fill="white" height="14" stroke="rgb(0,0,0)" width="35" x="463" y="343" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="19" x="480.5" y="355">wifi</text>
</svg>
</div>
<p>ホームゲートウェイは <a class="reference external" href="https://www.ntt-west.co.jp/kiki/download/flets/rt500ki/">RT-500KI</a> です。
WiFiルータは <a class="reference external" href="http://www.aterm.jp/product/atermstation/product/warpstar/wg1800hp2/">AtermWG1800HP2</a> ですがWANポートが1つしかないため、primergyとbeagleの2台をつなぐためにハブを挟んでいます。
ハブはI-O DATAの <a class="reference external" href="https://www.iodata.jp/product/lan/hub/etg-esh5/">ETG-ESH5</a> です。
WiFiルータはブリッジモードを使用しています。</p>
<p>論理ネットワーク図は以下の通りです。</p>
<div><svg height="732" viewBox="0 0 912 732" width="912" xmlns="http://www.w3.org/2000/svg" xmlns:inkspace="http://www.inkscape.org/namespaces/inkscape" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs id="defs_block">
    <filter height="1.504" id="filter_blur" inkspace:collect="always" width="1.1575" x="-0.07875" y="-0.252">
      <feGaussianBlur id="feGaussianBlur3780" inkspace:collect="always" stdDeviation="4.2" />
    </filter>
  </defs>
  <title>blockdiag</title>
  <desc />
  <path d="M 171 178 A16,8 0 0 1 187 170 A16,6 0 0 1 227 170 A16,8 0 0 1 243 178 A16,8 0 0 1 243 194 A16,20 0 0 1 219 194 A16,20 0 0 1 195 194 A16,20 0 0 1 171 194 A16,8 0 0 1 171 178" fill="rgb(0,0,0)" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="104" x="155" y="306" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="104" x="307" y="450" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="104" x="459" y="450" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="104" x="155" y="594" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="104" x="611" y="594" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="104" x="763" y="594" />
  <path d="M 131 391 L 587 391 A2,4 0 0 1 587 399 L 131 399 A2,4 0 0 1 131 391" fill="rgb(0,0,0)" style="filter:url(#filter_blur)" />
  <path d="M 131 535 L 891 535 A2,4 0 0 1 891 543 L 131 543 A2,4 0 0 1 131 535" fill="rgb(0,0,0)" style="filter:url(#filter_blur)" />
  <path d="M 128 388 L 584 388 A2,4 0 0 1 584 396 L 128 396 A2,4 0 0 1 128 388" fill="rgb(185,203,228)" stroke="rgb(0,0,0)" />
  <path d="M 584 396 A2,4 0 0 1 584 388" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 388 L 584 388" fill="none" stroke="none" />
  <path d="M 128 532 L 888 532 A2,4 0 0 1 888 540 L 128 540 A2,4 0 0 1 128 532" fill="rgb(185,203,228)" stroke="rgb(0,0,0)" />
  <path d="M 888 540 A2,4 0 0 1 888 532" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 532 L 888 532" fill="none" stroke="none" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="22" x="109.0" y="390">dmz</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="72" x="84.0" y="404">192.168.1.x/24</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="40" x="100.0" y="534">internal</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="72" x="84.0" y="548">192.168.2.x/24</text>
  <path d="M 204 104 L 204 156" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 204 196 L 204 248" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 168 172 A16,8 0 0 1 184 164 A16,6 0 0 1 224 164 A16,8 0 0 1 240 172 A16,8 0 0 1 240 188 A16,20 0 0 1 216 188 A16,20 0 0 1 192 188 A16,20 0 0 1 168 188 A16,8 0 0 1 168 172" fill="rgb(255,255,255)" stroke="rgb(0,0,0)" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="20" x="204.0" y="181">inet</text>
  <path d="M 204 248 L 204 300" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 204 340 L 204 388" fill="none" stroke="rgb(0,0,0)" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="78" x="255.0" y="362">ipv6:prefix:xxxx</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="57" x="244.5" y="375">192.168.1.1</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="104" x="152" y="300" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="49" x="204.5" y="327">home-gw</text>
  <path d="M 356 396 L 356 444" fill="none" stroke="rgb(0,0,0)" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="77" x="406.5" y="411">ipv6:prefix:zzzz</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="76" x="406.0" y="425">vip:192.168.1.2</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="57" x="396.5" y="438">192.168.1.3</text>
  <path d="M 356 484 L 356 532" fill="none" stroke="rgb(0,0,0)" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="76" x="406.0" y="506">vip:192.168.2.1</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="57" x="396.5" y="519">192.168.2.2</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="104" x="304" y="444" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="34" x="356.0" y="471">beagle</text>
  <path d="M 508 396 L 508 444" fill="none" stroke="rgb(0,0,0)" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="81" x="560.5" y="418">ipv6:prefix:yyyy</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="57" x="548.5" y="431">192.168.1.4</text>
  <path d="M 508 484 L 508 532" fill="none" stroke="rgb(0,0,0)" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="57" x="548.5" y="512">192.168.2.3</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="104" x="456" y="444" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="46" x="508.0" y="471">primergy</text>
  <path d="M 204 540 L 204 588" fill="none" stroke="rgb(0,0,0)" />
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="104" x="152" y="588" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="47" x="204.5" y="615">thinkpad</text>
  <path d="M 660 540 L 660 588" fill="none" stroke="rgb(0,0,0)" />
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="104" x="608" y="588" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="41" x="660.5" y="613">android</text>
  <path d="M 812 540 L 812 588" fill="none" stroke="rgb(0,0,0)" />
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="104" x="760" y="588" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="23" x="812.5" y="615">ipad</text>
</svg>
</div>
</div>
<div class="section" id="id3">
<h2>ホームゲートウェイの設定<a class="headerlink" href="#id3" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li><dl class="simple">
<dt>DHCPサーバの無効化</dt><dd><ul>
<li><p>[詳細設定]/[DHCPv4サーバ設定]で[DHCPv4サーバ機能]の[使用する]チェックボックスをオフ</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>LAN側の静的ルーティング</dt><dd><ul>
<li><p>[詳細設定]/[LAN側静的ルーティング設定]で以下のように設定します。</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p>宛先IPアドレス/マスク長</p></th>
<td><p>192.168.2.0/24</p></td>
</tr>
<tr class="row-even"><th class="stub"><p>ゲートウェイ</p></th>
<td><p>192.168.1.2</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id4">
<h2>サーバのネットワーク設定<a class="headerlink" href="#id4" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>beagleの <code class="code docutils literal notranslate"><span class="pre">/etc/netplan/01-netcfg.yaml</span></code> は以下の通りです。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>network:
  version: 2
  renderer: networkd
  ethernets:
    enp3s0:
      dhcp4: no
      addresses: [192.168.1.3/24]
      gateway4: 192.168.1.1
      nameservers:
        addresses: [192.168.1.1]
      dhcp6: no
    enp4s0:
      dhcp4: no
      addresses: [192.168.2.2/24]
</pre></div>
</div>
<p>primergyの <code class="code docutils literal notranslate"><span class="pre">/etc/netplan/01-netcfg.yaml</span></code> は以下の通りです。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>network:
  version: 2
  renderer: networkd
  ethernets:
    enp0s25:
      dhcp4: no
      addresses: [192.168.1.4/24]
      gateway4: 192.168.1.1
      nameservers:
        addresses: [192.168.1.1]
      dhcp6: no
    enp2s0:
      dhcp4: no
      addresses: [192.168.2.3/24]
      dhcp6: no
</pre></div>
</div>
<p><code class="code docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">netplan</span> <span class="pre">apply</span></code> コマンドで反映しました。</p>
</div>
<div class="section" id="ipv4">
<h2>IPv4フォワーディングの有効化<a class="headerlink" href="#ipv4" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>IPv4のルータとして機能させるため、以下のコマンドを実行してIPv4フォワーディングを有効化します。</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo sysctl net.ipv4.ip_forward=1</span>
</pre></div>
</div>
<p>OS再起動時にもこの設定がされるように <code class="code docutils literal notranslate"><span class="pre">/etc/sysctl.d/99-sysctl.conf</span></code> 内の以下の行をアンコメントします。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Uncomment the next line to enable packet forwarding for IPv4
net.ipv4.ip_forward=1
</pre></div>
</div>
</div>
<div class="section" id="ipoe">
<h2>IPoEの設定<a class="headerlink" href="#ipoe" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>上記のように配線した状態で <code class="code docutils literal notranslate"><span class="pre">ip</span> <span class="pre">a</span></code> でIPアドレスを確認するとIPv6のグローバルアドレスがついていました。</p>
<p><code class="code docutils literal notranslate"><span class="pre">ip</span> <span class="pre">-6</span> <span class="pre">tunnel</span> <span class="pre">add</span></code> コマンドでmodeにipip6（IPv4 over IPv6トンネル）を指定することでトンネルを作成します。以下のようなシェルスクリプト <code class="code docutils literal notranslate"><span class="pre">/usr/local/sbin/ipoe.sh</span></code> を作成しました。</p>
<p>IPv6グローバルIPアドレスが付与されるまでの待つコマンドを改良しました。またデフォルトルートの切り替えをip route deleteしてaddしてたのをchangeを使うように改善しました（2019年7月27追記）。</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh -x</span>
<span class="nb">set</span> -eu

<span class="c1">#. /etc/default/ipoe</span>

<span class="k">case</span> <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span> in
start<span class="o">)</span>
  <span class="k">while</span> ! /sbin/ip -br a s dev <span class="si">${</span><span class="nv">WAN_INTERFACE</span><span class="si">}</span> mngtmpaddr <span class="p">|</span> /bin/grep -q UP<span class="p">;</span> <span class="k">do</span> sleep <span class="m">1</span><span class="p">;</span> <span class="k">done</span>
  <span class="nv">local_addr</span><span class="o">=</span><span class="k">$(</span>/sbin/ip -br a s dev <span class="si">${</span><span class="nv">WAN_INTERFACE</span><span class="si">}</span> mngtmpaddr <span class="p">|</span> /usr/bin/awk <span class="s1">&#39;{ sub(&quot;/.*&quot;, &quot;&quot;, $3); print $3 }&#39;</span><span class="k">)</span>
  /sbin/ip -6 tunnel add <span class="s2">&quot;</span><span class="si">${</span><span class="nv">TUNNEL_NAME</span><span class="si">}</span><span class="s2">&quot;</span> mode ipip6 remote <span class="s2">&quot;</span><span class="si">${</span><span class="nv">GATEWAY_ADDR</span><span class="si">}</span><span class="s2">&quot;</span> <span class="nb">local</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">local_addr</span><span class="si">}</span><span class="s2">&quot;</span> dev <span class="s2">&quot;</span><span class="si">${</span><span class="nv">WAN_INTERFACE</span><span class="si">}</span><span class="s2">&quot;</span>
  /sbin/ip link <span class="nb">set</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">TUNNEL_NAME</span><span class="si">}</span><span class="s2">&quot;</span> up
  /sbin/ip route change default dev <span class="s2">&quot;</span><span class="si">${</span><span class="nv">TUNNEL_NAME</span><span class="si">}</span><span class="s2">&quot;</span>
  <span class="p">;;</span>
stop<span class="o">)</span>
  /sbin/ip route change default dev <span class="s2">&quot;</span><span class="si">${</span><span class="nv">WAN_INTERFACE</span><span class="si">}</span><span class="s2">&quot;</span>
  /sbin/ip link <span class="nb">set</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">TUNNEL_NAME</span><span class="si">}</span><span class="s2">&quot;</span> down
  /sbin/ip -6 tunnel del <span class="s2">&quot;</span><span class="si">${</span><span class="nv">TUNNEL_NAME</span><span class="si">}</span><span class="s2">&quot;</span>
  <span class="p">;;</span>
*<span class="o">)</span>
  <span class="nb">echo</span> <span class="s2">&quot;Usage: ipoe.sh (start|stop)&quot;</span>
  <span class="nb">exit</span> <span class="m">1</span>
  <span class="p">;;</span>
<span class="k">esac</span>
</pre></div>
</div>
<p><code class="code docutils literal notranslate"><span class="pre">local_addr</span></code> を設定している箇所は以下のような行からIPv6アドレスを取り出しています。もしmngtmpaddrを含む行が複数ある場合は最初の行を採用します。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>inet6 xxxx:xxx:xxx:xxxx:xxxx:xxx:xxxx:xxxx/64 scope global dynamic mngtmpaddr noprefixroute
</pre></div>
</div>
<p>サービス定義ファイル <code class="code docutils literal notranslate"><span class="pre">/etc/systemd/system/ipoe.service</span></code> は以下のようにしました。
<a class="reference external" href="https://wiki.archlinux.jp/index.php/IPv6_%E3%83%88%E3%83%B3%E3%83%8D%E3%83%AB%E3%83%96%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%BC%E8%A8%AD%E5%AE%9A">IPv6 トンネルブローカー設定 - ArchWiki</a> でsystemd-networkdを使ったトンネルの設定方法も見つけたのですが、こちらは試していません。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[Unit]
Description=IPoE tunnel
After=network.target

[Service]
Type=oneshot
RemainAfterExit=yes
EnvironmentFile=/etc/default/ipoe
ExecStart=/usr/local/sbin/ipoe.sh start
ExecStop=/usr/local/sbin/ipoe.sh stop

[Install]
WantedBy=multi-user.target
</pre></div>
</div>
<p>設定ファイル <code class="code docutils literal notranslate"><span class="pre">/etc/default/ipoe</span></code> は以下の通りです。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># tunnel device name
TUNNEL_NAME=ip6tnl1

# WAN network interface
WAN_INTERFACE=enp0s25

# Gateway address
# You can get this address by running the following command.
# dig -t aaaa gw.transix.jp
GATEWAY_ADDR=2404:8e01::feed:100
</pre></div>
</div>
<p><code class="code docutils literal notranslate"><span class="pre">WAN_INTERFACE</span></code> は実際の環境に応じて変更してください。
<code class="code docutils literal notranslate"><span class="pre">GATEWAY_ADDR</span></code> は <code class="code docutils literal notranslate"><span class="pre">dig</span> <span class="pre">-t</span> <span class="pre">aaaa</span> <span class="pre">gw.transix.jp</span></code> で調べられます。
NTT西日本エリアだと <code class="code docutils literal notranslate"><span class="pre">2404:8e01::feed:100</span></code> と <code class="code docutils literal notranslate"><span class="pre">2404:8e01::feed:101</span></code> のラウンドロビンになっていました。
<a class="reference external" href="https://faq.interlink.or.jp/faq2/View/wcDisplayContent.aspx?id=220">YAMAHA RTX1200の設定マニュアル</a> によるとNTT東日本エリアでは <code class="code docutils literal notranslate"><span class="pre">2404:8e00::feed:100</span></code> と <code class="code docutils literal notranslate"><span class="pre">2404:8e00::feed:101</span></code> で、エリアは <a class="reference external" href="http://www.ntt.co.jp/product/category/area.html">NTT東日本、NTT西日本のサービス提供地域について</a> で確認できます。</p>
<p>以下のコマンドで反映しました。</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo systemctl daemon-reload</span>
<span class="go">sudo systemctl start ipoe</span>
<span class="go">sudo systemctl enable ipoe</span>
</pre></div>
</div>
</div>
<div class="section" id="iptables">
<h2>iptablesの設定<a class="headerlink" href="#iptables" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>ファイアウォールは <a class="reference external" href="https://help.ubuntu.com/community/UFW">UFW</a> は使わず、iptablesとiptables-persistentを使っています。</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt install iptables-persistent</span>
</pre></div>
</div>
<p>設定は以下の通りです。LXDとdockerを使っているのでそれらの設定も含まれています。</p>
<p><code class="code docutils literal notranslate"><span class="pre">/etc/iptables/rules.v4</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Generated by iptables-save v1.6.1 on Sat Dec  1 14:44:22 2018
*filter
:INPUT ACCEPT [238:15436]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [114:36056]
:DOCKER - [0:0]
:DOCKER-ISOLATION-STAGE-1 - [0:0]
:DOCKER-ISOLATION-STAGE-2 - [0:0]
:DOCKER-USER - [0:0]
:WAN_IN - [0:0]
:WAN_LOCAL - [0:0]
-A INPUT -i lxdbr0 -p tcp -m tcp --dport 53 -m comment --comment &quot;generated for LXD network lxdbr0&quot; -j ACCEPT
-A INPUT -i lxdbr0 -p udp -m udp --dport 53 -m comment --comment &quot;generated for LXD network lxdbr0&quot; -j ACCEPT
-A INPUT -i lxdbr0 -p udp -m udp --dport 67 -m comment --comment &quot;generated for LXD network lxdbr0&quot; -j ACCEPT
-A INPUT -i enp0s25 -j WAN_LOCAL
-A FORWARD -o lxdbr0 -m comment --comment &quot;generated for LXD network lxdbr0&quot; -j ACCEPT
-A FORWARD -i lxdbr0 -m comment --comment &quot;generated for LXD network lxdbr0&quot; -j ACCEPT
-A FORWARD -i enp0s25 -j WAN_IN
-A FORWARD -j DOCKER-USER
-A FORWARD -j DOCKER-ISOLATION-STAGE-1
-A FORWARD -o docker0 -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
-A FORWARD -o docker0 -j DOCKER
-A FORWARD -i docker0 ! -o docker0 -j ACCEPT
-A FORWARD -i docker0 -o docker0 -j ACCEPT
-A OUTPUT -o lxdbr0 -p tcp -m tcp --sport 53 -m comment --comment &quot;generated for LXD network lxdbr0&quot; -j ACCEPT
-A OUTPUT -o lxdbr0 -p udp -m udp --sport 53 -m comment --comment &quot;generated for LXD network lxdbr0&quot; -j ACCEPT
-A OUTPUT -o lxdbr0 -p udp -m udp --sport 67 -m comment --comment &quot;generated for LXD network lxdbr0&quot; -j ACCEPT
-A DOCKER-ISOLATION-STAGE-1 -i docker0 ! -o docker0 -j DOCKER-ISOLATION-STAGE-2
-A DOCKER-ISOLATION-STAGE-1 -j RETURN
-A DOCKER-ISOLATION-STAGE-2 -o docker0 -j DROP
-A DOCKER-ISOLATION-STAGE-2 -j RETURN
-A DOCKER-USER -j RETURN
-A WAN_IN -m comment --comment WAN_IN-10 -m state --state RELATED,ESTABLISHED -j RETURN
-A WAN_IN -m comment --comment WAN_IN-20 -m state --state INVALID -j DROP
-A WAN_IN -s 192.168.1.0/24 -p icmp -m comment --comment WAN_IN-30 -j ACCEPT
-A WAN_IN -m comment --comment &quot;WAN_IN-10000 default-action drop&quot; -j LOG --log-prefix &quot;[WAN_IN-default-D]&quot;
-A WAN_IN -m comment --comment &quot;WAN_IN-10000 default-action drop&quot; -j DROP
-A WAN_LOCAL -m comment --comment WAN_LOCAL-10 -m state --state RELATED,ESTABLISHED -j RETURN
-A WAN_LOCAL -m comment --comment WAN_LOCAL-20 -m state --state INVALID -j DROP
-A WAN_LOCAL -s 192.168.1.0/24 -p icmp -m comment --comment WAN_LOCAL-30 -j ACCEPT
-A WAN_LOCAL -s 192.168.1.0/24 -p vrrp -m comment --comment WAN_LOCAL-40 -j ACCEPT
-A WAN_LOCAL -m comment --comment &quot;WAN_LOCAL-10000 default-action drop&quot; -j LOG --log-prefix &quot;[WAN_LOCAL-default-D]&quot;
-A WAN_LOCAL -m comment --comment &quot;WAN_LOCAL-10000 default-action drop&quot; -j DROP
COMMIT
# Completed on Sat Dec  1 14:44:22 2018
# Generated by iptables-save v1.6.1 on Sat Dec  1 14:44:22 2018
*mangle
:PREROUTING ACCEPT [2054464:7594383842]
:INPUT ACCEPT [1989651:7566369331]
:FORWARD ACCEPT [64047:27954808]
:OUTPUT ACCEPT [937916:146880228]
:POSTROUTING ACCEPT [1005398:175609326]
-A POSTROUTING -o lxdbr0 -p udp -m udp --dport 68 -m comment --comment &quot;generated for LXD network lxdbr0&quot; -j CHECKSUM --checksum-fill
COMMIT
# Completed on Sat Dec  1 14:44:22 2018
# Generated by iptables-save v1.6.1 on Sat Dec  1 14:44:22 2018
*nat
:PREROUTING ACCEPT [9291:2179690]
:INPUT ACCEPT [3252:483996]
:OUTPUT ACCEPT [3623:517216]
:POSTROUTING ACCEPT [3545:511992]
-A POSTROUTING -s 10.70.121.0/24 ! -d 10.70.121.0/24 -m comment --comment &quot;generated for LXD network lxdbr0&quot; -j MASQUERADE
COMMIT
# Completed on Sat Dec  1 14:44:22 2018
</pre></div>
</div>
<p><code class="code docutils literal notranslate"><span class="pre">/etc/iptables/rules.v6</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Generated by ip6tables-save v1.6.1 on Mon Nov 12 18:31:46 2018
*nat
:PREROUTING ACCEPT [5513:616145]
:INPUT ACCEPT [5243:585056]
:OUTPUT ACCEPT [2714:318879]
:POSTROUTING ACCEPT [2645:312423]
-A POSTROUTING -s fd42:f7bd:987f:2f80::/64 ! -d fd42:f7bd:987f:2f80::/64 -m comment --comment &quot;generated for LXD network lxdbr0&quot; -j MASQUERADE
COMMIT
# Completed on Mon Nov 12 18:31:46 2018
# Generated by ip6tables-save v1.6.1 on Mon Nov 12 18:31:46 2018
*filter
:INPUT ACCEPT [251:73519]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [226:60652]
:WANv6_IN - [0:0]
:WANv6_LOCAL - [0:0]
-A INPUT -i lxdbr0 -p tcp -m tcp --dport 53 -m comment --comment &quot;generated for LXD network lxdbr0&quot; -j ACCEPT
-A INPUT -i lxdbr0 -p udp -m udp --dport 53 -m comment --comment &quot;generated for LXD network lxdbr0&quot; -j ACCEPT
-A INPUT -i lxdbr0 -p udp -m udp --dport 547 -m comment --comment &quot;generated for LXD network lxdbr0&quot; -j ACCEPT
-A INPUT -i enp0s25 -j WANv6_LOCAL
-A FORWARD -o lxdbr0 -m comment --comment &quot;generated for LXD network lxdbr0&quot; -j ACCEPT
-A FORWARD -i lxdbr0 -m comment --comment &quot;generated for LXD network lxdbr0&quot; -j ACCEPT
-A FORWARD -i enp0s25 -j WANv6_IN
-A OUTPUT -o lxdbr0 -p tcp -m tcp --sport 53 -m comment --comment &quot;generated for LXD network lxdbr0&quot; -j ACCEPT
-A OUTPUT -o lxdbr0 -p udp -m udp --sport 53 -m comment --comment &quot;generated for LXD network lxdbr0&quot; -j ACCEPT
-A OUTPUT -o lxdbr0 -p udp -m udp --sport 547 -m comment --comment &quot;generated for LXD network lxdbr0&quot; -j ACCEPT
-A WANv6_IN -m comment --comment WANv6_IN-10 -m state --state RELATED,ESTABLISHED -j RETURN
-A WANv6_IN -m comment --comment WANv6_IN-20 -m state --state INVALID -j DROP
-A WANv6_IN -p ipv6-icmp -m comment --comment WANv6_IN-30 -j RETURN
-A WANv6_IN -m comment --comment &quot;WANv6_IN-10000 default-action drop&quot; -j LOG --log-prefix &quot;[WANv6_IN-default-D]&quot;
-A WANv6_IN -m comment --comment &quot;WANv6_IN-10000 default-action drop&quot; -j DROP
-A WANv6_LOCAL -m comment --comment WANv6_LOCAL-10 -m state --state RELATED,ESTABLISHED -j RETURN
-A WANv6_LOCAL -m comment --comment WANv6_LOCAL-20 -m state --state INVALID -j DROP
-A WANv6_LOCAL -p ipv6-icmp -m comment --comment WANv6_LOCAL-30 -j RETURN
-A WANv6_LOCAL -p udp -m comment --comment WANv6_LOCAL-40 -m udp --sport 547 --dport 546 -j RETURN
-A WANv6_LOCAL -p ipip -m comment --comment WANv6_LOCAL-50 -j RETURN
-A WANv6_LOCAL -p tcp -m comment --comment WANv6_LOCAL-60 -m tcp --dport 22 -j RETURN
-A WANv6_LOCAL -m comment --comment &quot;WANv6_LOCAL-10000 default-action drop&quot; -j LOG --log-prefix &quot;[WANv6_LOCAL-default-D]&quot;
-A WANv6_LOCAL -m comment --comment &quot;WANv6_LOCAL-10000 default-action drop&quot; -j DROP
COMMIT
# Completed on Mon Nov 12 18:31:46 2018
</pre></div>
</div>
<p>ファイルの内容を変更したら以下のコマンドを実行して反映します。</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo iptables-restore &lt; /etc/iptables/rules.v4</span>
<span class="go">sudo ip6tables-restore &lt; /etc/iptables/rules.v6</span>
</pre></div>
</div>
<p>逆に設定をファイルに保存するには以下のコマンドを実行します。</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo iptables-save | sudo tee /etc/iptables/rules.v4</span>
<span class="go">sudo ip6tables-save | sudo tee /etc/iptables/rules.v6</span>
</pre></div>
</div>
<p><code class="code docutils literal notranslate"><span class="pre">/etc/iptables/rules.v{4,6}</span></code> の内容はbitbucket.orgのプライベートレポジトリで管理しています。</p>
</div>
<div class="section" id="keepalived">
<h2>keepalivedの設定<a class="headerlink" href="#keepalived" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>keepalivedを使ってVIP（仮想IPアドレス）を設定しています。
keepalivedは標準パッケージをインストールしました。</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt install keepalived</span>
</pre></div>
</div>
<p><code class="code docutils literal notranslate"><span class="pre">/etc/keepalived/keepalived.conf</span></code> は以下の通りです。送信元のメールアドレスは途中を大文字にしてどこから送られたかを判別できるようにしています。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>global_defs {
   notification_email {
     john.doe+home@example.com
   }
   notification_email_from jOhn.doe@example.com
   smtp_server localhost
   smtp_connect_timeout 30
   router_id 1
}

include vrrp.conf
</pre></div>
</div>
<p>beagleの <code class="code docutils literal notranslate"><span class="pre">/etc/keepalived/vrrp.conf</span></code> は以下の通りです。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>vrrp_instance VRRP1 {
  state MASTER
  interface enp3s0
  virtual_router_id 1
  priority 200
  advert_int 1
  smtp_alert
  virtual_ipaddress {
    192.168.1.2/24
  }
}

vrrp_instance VRRP2 {
  state MASTER
  interface enp4s0
  virtual_router_id 2
  priority 200
  advert_int 1
  smtp_alert
  virtual_ipaddress {
    192.168.2.1/24
  }
}
</pre></div>
</div>
<p>primergyの <code class="code docutils literal notranslate"><span class="pre">/etc/keepalived/vrrp.conf</span></code> は以下の通りです。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>vrrp_instance VRRP1 {
  state BACKUP
  interface enp0s25
  virtual_router_id 1
  priority 100
  advert_int 1
  smtp_alert
  virtual_ipaddress {
    192.168.1.2/24
  }
}

vrrp_instance VRRP2 {
  state BACKUP
  interface enp2s0
  virtual_router_id 2
  priority 100
  advert_int 1
  smtp_alert
  virtual_ipaddress {
    192.168.2.1/24
  }
}
</pre></div>
</div>
<p>stateとpriorityをbeagleとprimergyで上記のように設定することでbeagleのほうを優先するようにしています。</p>
</div>
<div class="section" id="dhcp">
<h2>DHCPサーバの設定<a class="headerlink" href="#dhcp" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>DHCPサーバはisc-dhcp-serverパッケージを使っています。</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt install isc-dhcp-server</span>
</pre></div>
</div>
<p>beagleの <code class="code docutils literal notranslate"><span class="pre">/etc/dhcp/dhcpd.conf</span></code> は以下の通りです。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>option domain-name-servers 192.168.1.1;

default-lease-time 600;
max-lease-time 7200;

ddns-update-style none;

subnet 192.168.2.0 netmask 255.255.255.0 {
  range 192.168.2.20 192.168.2.99;
  option routers 192.168.2.1;
}
</pre></div>
</div>
<p>primergyの <code class="code docutils literal notranslate"><span class="pre">/etc/dhcp/dhcpd.conf</span></code> は以下の通りです。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>option domain-name-servers 192.168.1.1;

default-lease-time 600;
max-lease-time 7200;

ddns-update-style none;

subnet 192.168.2.0 netmask 255.255.255.0 {
  range 192.168.2.100 192.168.2.189;
  option routers 192.168.2.1;
}
</pre></div>
</div>
<p>beagleとprimergyでDHCPのrangeを重ならないように設定し、ゲートウェイにはVIPを指定しています。こうすることで片方のサーバが停止してもThinkPadなどDHCPクライアントのマシンはそのまま通信できると同僚に教わりました。ありがとうございます！</p>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    <a id="sidebar-anchor"></a>
    

  <h3><a href="index.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">UbuntuでIPoE</a><ul>
<li><a class="reference internal" href="#id1">はじめに</a></li>
<li><a class="reference internal" href="#id2">構成図</a></li>
<li><a class="reference internal" href="#id3">ホームゲートウェイの設定</a></li>
<li><a class="reference internal" href="#id4">サーバのネットワーク設定</a></li>
<li><a class="reference internal" href="#ipv4">IPv4フォワーディングの有効化</a></li>
<li><a class="reference internal" href="#ipoe">IPoEの設定</a></li>
<li><a class="reference internal" href="#iptables">iptablesの設定</a></li>
<li><a class="reference internal" href="#keepalived">keepalivedの設定</a></li>
<li><a class="reference internal" href="#dhcp">DHCPサーバの設定</a></li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="install-sphinx-on-windows10.html"
                        title="前の章へ">Windows 10にSphinxをインストール</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="create-self-signed-certificate-authority-with-openssl.html"
                        title="次の章へ">OpenSSLで自己認証局を作る</a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/ipoe-on-ubuntu.rst.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="検索" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="create-self-signed-certificate-authority-with-openssl.html" title="OpenSSLで自己認証局を作る"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="install-sphinx-on-windows10.html" title="Windows 10にSphinxをインストール"
             accesskey="P">前へ</a> |</li>
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Hiroaki Nakamura.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>